I"ô<p>å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°åœ¨å­å…ƒç´ ç”¨ stopPropagation é˜»æ­¢ç»‘å®šåœ¨ document ä¸Šçš„äº‹ä»¶çš„æ—¶å€™ï¼Œæ˜¯æ²¡åŠæ³•åšåˆ°çš„ï¼Œåªå¯ä»¥é˜»æ­¢çˆ¶çº§ç»‘å®šçš„äº‹ä»¶çš„è§¦å‘ã€‚</p>

<p>å…³äºè¿™ä¸ªé—®é¢˜çš„è§£é‡Šï¼Œç½‘ä¸Šäº”èŠ±å…«é—¨ï¼Œæœ‰äº›å°†å…¶å½’ç»“ä¸ºæ˜¯ç”±äºäº‹ä»¶å§”æ‰˜çš„åŸå› ï¼Œæˆ‘è‡ªå·±å°è¯•äº†ä¹‹åå‘ç°ï¼Œå…¶å®åŸç”Ÿ document ç»‘å®šçš„äº‹ä»¶æ˜¯æœ€åæ‰æ‰§è¡Œçš„</p>

<pre><code class="language-javascript">class ExampleApplication extends React.Component {
  componentDidMount() {
    document.addEventListener("click", () =&gt; {
      alert("document click");
    });
  }

  outClick(e) {
    console.log(e.currentTarget);
    alert("outClick");
  }

  onClick(e) {
    console.log(e.currentTarget);
    alert("onClick");
    e.stopPropagation();
  }
  render() {
    return (
      &lt;div onClick={this.outClick}&gt;
        &lt;button onClick={this.onClick}&gt; æµ‹è¯•clickäº‹ä»¶ &lt;/button&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre>

<p>å…¶å®ä»ä¸Šé¢ä¾‹å­çš„è¾“å‡ºï¼š ç”±â€™onClickâ€™,å†åˆ°â€™document clickâ€™å¯çŸ¥ï¼Œå…¶å®åŸç”Ÿ document ä¸Šç»‘å®šçš„äº‹ä»¶æ—¶æœ€åæ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯å› ä¸º document æ”¶åˆ°äº‹ä»¶å¿«æ…¢çš„åŸå› è€Œå¯¼è‡´è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>æœ€åæŸ¥é˜…èµ„æ–™åå‘ç° <strong>å‡ºç°ä¸Šè¿° bug çš„ä¸»è¦åŸå› æ˜¯æ··ç”¨æµè§ˆå™¨åŸç”Ÿäº‹ä»¶è·Ÿ React åˆæˆäº‹ä»¶</strong></p>

<h4 id="react-æœ‰è‡ªå·±çš„ä¸€å¥—äº‹ä»¶å¤„ç†æœºåˆ¶å®ƒä¼šå°†æ‰€æœ‰çš„äº‹ä»¶éƒ½ç»‘å®šåœ¨-document-ä¸Šç„¶åå†ç”¨-dispatchevent-ç»Ÿä¸€åˆ†å‘è¿™æ—¶å€™åˆ†å‘çš„æ˜¯åˆæˆäº‹ä»¶è€Œ-onclickeè¿™æ—¶å€™æ‹¿åˆ°çš„-e-å…¶å®æ˜¯åˆæˆäº‹ä»¶åªèƒ½é˜»æ­¢åˆæˆäº‹ä»¶çš„å†’æ³¡">React æœ‰è‡ªå·±çš„ä¸€å¥—äº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œå®ƒä¼šå°†æ‰€æœ‰çš„äº‹ä»¶éƒ½ç»‘å®šåœ¨ document ä¸Šï¼Œç„¶åå†ç”¨ dispatchEvent ç»Ÿä¸€åˆ†å‘ï¼Œè¿™æ—¶å€™åˆ†å‘çš„æ˜¯åˆæˆäº‹ä»¶ã€‚è€Œ onClick(e)è¿™æ—¶å€™æ‹¿åˆ°çš„ e å…¶å®æ˜¯åˆæˆäº‹ä»¶ï¼Œåªèƒ½é˜»æ­¢åˆæˆäº‹ä»¶çš„å†’æ³¡ã€‚</h4>

<pre><code class="language-javascript">class ExampleApplication extends React.Component {
  componentDidMount() {
    document.addEventListener("click", () =&gt; {
      alert("document click");
    });
    document.getElementById("div1").addEventListener("click", () =&gt; {
      alert("åŸç”ŸoutClick");
    });
  }

  outClick(e) {
    console.log(e.currentTarget);
    alert("åˆæˆoutClick");
  }

  onClick(e) {
    console.log(e.currentTarget);
    alert("onClick");
    e.stopPropagation();
  }
  render() {
    return (
      &lt;div id="div1" onClick={this.outClick}&gt;
        &lt;button onClick={this.onClick}&gt; æµ‹è¯•clickäº‹ä»¶ &lt;/button&gt;
      &lt;/div&gt;
    );
  }
}
</code></pre>

<p>åšäº†ç‚¹å°æ”¹åŠ¨ï¼Œå°±æ˜¯å¤–å±‚çš„divç»‘å®šçš„å‡½æ•°ç”¨åŸç”Ÿçš„æ–¹å¼è·Ÿjsxçš„æ–¹å¼éƒ½ç»‘å®šä¸€æ¬¡ï¼Œæ‰€ä»¥æœ€ç»ˆçš„è¾“å‡ºä¸º</p>
<h4 id="åŸç”Ÿoutclick-onclickdocument-click">â€˜åŸç”ŸoutClickâ€™, â€˜onClickâ€™,â€™document clickâ€™</h4>
<h2 id="è§£å†³æ–¹æ³•-enativeeventstopimmediatepropagation-ä½¿ç»‘å®šåœ¨documentçš„å…¶ä»–äº‹ä»¶ä¸å†è§¦å‘">è§£å†³æ–¹æ³• e.nativeEvent.stopImmediatePropagation(); ä½¿ç»‘å®šåœ¨documentçš„å…¶ä»–äº‹ä»¶ä¸å†è§¦å‘</h2>
:ET