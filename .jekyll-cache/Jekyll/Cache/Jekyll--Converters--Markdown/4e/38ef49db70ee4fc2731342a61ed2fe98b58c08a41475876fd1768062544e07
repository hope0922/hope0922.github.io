I"û<pre><code class="language-javascript">//#åŸºç¡€é•œåƒ
FROM docker.bluetron.com/library/nginx:latest
//#ç»´æŠ¤è€…
MAINTAINER linlinyeyu
//#æ·»åŠ æ–‡ä»¶åˆ°å®¹å™¨
ADD config/nginx.conf /etc/nginx/nginx.conf
ADD build /dist
ENTRYPOINT ["sh","-c","nginx"]

</code></pre>

<pre><code class="language-javascript">
daemon off;
//#å®šä¹‰Nginxè¿è¡Œçš„ç”¨æˆ·å’Œç”¨æˆ·ç»„
user  root;
// #nginxè¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºç­‰äºCPUæ€»æ ¸å¿ƒæ•°ã€‚
worker_processes  1;

// #å…¨å±€é”™è¯¯æ—¥å¿—å®šä¹‰ç±»å‹ï¼Œ[ debug | info | notice | warn | error | crit ]
error_log  /var/log/nginx/error.log warn;
// #è¿›ç¨‹æ–‡ä»¶
pid        /var/run/nginx.pid;

// #å·¥ä½œæ¨¡å¼ä¸è¿æ¥æ•°ä¸Šé™
events {
    worker_connections  1024;
}

// #è®¾å®šhttpæœåŠ¡å™¨
http {
    // #æ–‡ä»¶æ‰©å±•åä¸æ–‡ä»¶ç±»å‹æ˜ å°„è¡¨
    include       /etc/nginx/mime.types;
    // #é»˜è®¤æ–‡ä»¶ç±»å‹
    default_type  application/octet-stream;
    // #æ—¥å¿—æ ¼å¼è®¾å®š
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    //  #å®šä¹‰æœ¬è™šæ‹Ÿä¸»æœºçš„è®¿é—®æ—¥å¿—
    access_log  /var/log/nginx/access.log  main;
    // #å¼€å¯é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼
    sendfile        on;
    //#tcp_nopush     on;
    // #é•¿è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’
    keepalive_timeout  65;
    // #å¼€å¯ç›®å½•åˆ—è¡¨è®¿é—®ï¼Œåˆé€‚ä¸‹è½½æœåŠ¡å™¨ï¼Œé»˜è®¤å…³é—­ã€‚
    autoindex  on;

    //#gzip  on;

    //#include /etc/nginx/conf.d/*.conf;
    // #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°
    client_max_body_size 100M;
    // #ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶
    client_header_buffer_size    128k;
    // #è®¾å®šè¯·æ±‚ç¼“
    large_client_header_buffers  4  128k;

    server {
        // #ç›‘å¬80ç«¯å£
         listen 80;
         // #å¯¹ "/" å¯ç”¨åå‘ä»£ç†
         location /website {
           //æŒ‡å®šå½“å‰ç›®å½•
           alias /dist;
           // ä¾æ¬¡æŒ‰ç…§é¡ºåºæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
           try_files $uri /index.html /;
           index index.html;
           access_log /var/log/nginx/dist.log;
         }
         //#æœ¬åœ°åŠ¨é™åˆ†ç¦»åå‘ä»£ç†é…ç½®
        location /api/ {
          proxy_pass http://127.0.0.1:7001/;
      }
    }
}


</code></pre>

:ET