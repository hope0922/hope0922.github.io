<!DOCTYPE html>
<html>
<head>
    <!--
    * Author:         BeiYuu
    * Revised:        Mukosame
    * Revised:        hope0922
    -->
    <meta charset="utf-8" />
    <title>Redux通俗易懂的理解 | hope0922's blog</title>
    <meta name="author" content="Mukosame" />
    <meta name="renderer" content="webkit">
    <meta name="description" content="Everything about Mukosame" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="/css/default.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <link rel="alternatecss" type="application/rss+xml" title="hope0922's Blog" href="http://hope0922.github.io/feed.xml">
    <script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
</head>
<body>

    <div class="home-menu">
        <div class="home-icon-con">
            <a class="home-menu-icon" href="/">Hope0922</a>
            <a class="home-follow" href="#" title="Contact Me">+</a>
        </div>
        <div class="home-contact" style="width:136px;height: 20px; font-size: 12px; overflow: hidden;text-overflow: ellipsis;white-space: nowrap;" title="e-mail:hopexie0922@.163.com">
            hopexie0922@.163.com
        </div>
    </div>

    <link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>

<div id="content">
    <div class="entry">
        <h1 class="entry-title"><a href="/redux-understand" title="Redux通俗易懂的理解">Redux通俗易懂的理解</a></h1>
        <p class="entry-date">2018-01-30</p>
        <h1 id="redux通俗易懂的理解">Redux通俗易懂的理解</h1>

<h3 id="解答这个问题并不困难唯一的要求是你熟悉react不要光听别人描述名词理解起来是很困难的从需求出发看看使用react需要什么">解答这个问题并不困难：唯一的要求是你熟悉React。不要光听别人描述名词，理解起来是很困难的。从需求出发，看看使用React需要什么：</h3>
<ol>
  <li>React有props和state: props意味着父级分发下来的属性，state意味着组件内部可以自行管理的状态，并且整个React没有数据向上回溯的能力，也就是说数据只能单向向下分发，或者自行内部消化。理解这个是理解React和Redux的前提。</li>
  <li>一般构建的React组件内部可能是一个完整的应用，它自己工作良好，你可以通过属性作为API控制它。但是更多的时候发现React根本无法让两个组件互相交流，使用对方的数据。然后这时候不通过DOM沟通（也就是React体制内）解决的唯一办法就是提升state，将state放到共有的父组件中来管理，再作为props分发回子组件。</li>
  <li>子组件改变父组件state的办法只能是通过onClick触发父组件声明好的回调，也就是父组件提前声明好函数或方法作为契约描述自己的state将如何变化，再将它同样作为属性交给子组件使用。这样就出现了一个模式：数据总是单向从顶层向下分发的，但是只有子组件回调在概念上可以回到state顶层影响数据。这样state一定程度上是响应式的。</li>
  <li>为了面临所有可能的扩展问题，最容易想到的办法就是把所有state集中放到所有组件顶层，然后分发给所有组件。</li>
  <li>为了有更好的state管理，就需要一个库来作为更专业的顶层state分发给所有React应用，这就是Redux。让我们回来看看重现上面结构的需求：<br />
<strong>a</strong>. 需要回调通知state (等同于回调参数) -&gt; actionb. <br />
<strong>b</strong>. 需要根据回调处理 (等同于父级方法) -&gt; reducerc. <br />
<strong>c</strong>. 需要state (等同于总状态) -&gt; store.</li>
</ol>

<h3 id="对redux来说只有这三个要素">对Redux来说只有这三个要素：</h3>
<p><strong>a</strong>. action是纯声明式的数据结构，只提供事件的所有要素，不提供逻辑。<br />
<strong>b</strong>. reducer是一个匹配函数，action的发送是全局的：所有的reducer都可以捕捉到并匹配与自己相关与否，相关就拿走action中的要素进行逻辑处理，修改store中的状态，不相关就不对state做处理原样返回。<br />
<strong>c</strong>. store负责存储状态并可以被react api回调，发布action.当然一般不会直接把两个库拿来用，还有一个binding叫react-redux, 提供一个Provider和connect。很多人其实看懂了redux卡在这里。<br />
<strong>a</strong>. Provider是一个普通组件，可以作为顶层app的分发点，它只需要store属性就可以了。它会将state分发给所有被connect的组件，不管它在哪里，被嵌套多少层。<br />
<strong>b</strong>. connect是真正的重点，它是一个科里化函数，意思是先接受两个参数（数据绑定mapStateToProps和事件绑定mapDispatchToProps），再接受一个参数（将要绑定的组件本身）：mapStateToProps：构建好Redux系统的时候，它会被自动初始化，但是你的React组件并不知道它的存在，因此你需要分拣出你需要的Redux状态，所以你需要绑定一个函数，它的参数是state，简单返回你关心的几个值。mapDispatchToProps：声明好的action作为回调，也可以被注入到组件里，就是通过这个函数，它的参数是dispatch，通过redux的辅助方法bindActionCreator绑定所有action以及参数的dispatch，就可以作为属性在组件里面作为函数简单使用了，不需要手动dispatch。这个mapDispatchToProps是可选的，如果不传这个参数redux会简单把dispatch作为属性注入给组件，可以手动当做store.dispatch使用。这也是为什么要科里化的原因。做好以上流程Redux和React就可以工作了。</p>
<h4 id="简单地说就是">简单地说就是：</h4>
<h4 id="1-顶层分发状态让react组件被动地渲染">1. 顶层分发状态，让React组件被动地渲染。</h4>
<h4 id="2-监听事件事件有权利回到所有状态顶层影响状态">2. 监听事件，事件有权利回到所有状态顶层影响状态。</h4>

        <div id="disqus_container">
            <class="comment"/>
<div id="disqus_thread"></div>
        
        </div>
   </div>
   
    <div class="sidenav">
        <h2>Blog</h2>
        <ul class="artical-list">
        
            <li><a href="/nginx">前端项目nginx+docker部署配置及子目录部署</a></li>
        
            <li><a href="/file-preview">PC+移动端文件预览解决方案（离线无外网）</a></li>
        
            <li><a href="/study-record">JS基础学习巩固记录</a></li>
        
            <li><a href="/problem">问题汇总记录（1）</a></li>
        
            <li><a href="/webpack">webpack原理</a></li>
        
            <li><a href="/react-skills">reactjs常用技巧</a></li>
        
            <li><a href="/react-communicate">reactjs常用组件沟通</a></li>
        
            <li><a href="/react-shouldComponentUpdate">reactjs性能优化之shouldComponentUpdate</a></li>
        
            <li><a href="/react-shouldComponentUpdate-%E5%89%AF%E6%9C%AC">reactjs性能优化之shouldComponentUpdate</a></li>
        
            <li><a href="/redux-understand">Redux通俗易懂的理解</a></li>
        
            <li><a href="/jquery-plugin">jquery插件封装</a></li>
        
            <li><a href="/iframe-orgin">iframe跨域传输数据</a></li>
        
        </ul>

        <h2>About Me</h2>
        <ul class="artical-list">
        
            <li><a href="/my-resume">这是我的简历~</a></li>
        
        </ul>

    </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>


    <script type="text/javascript">
        $(function(){
            $('.home-follow').click(function(e){
                e.preventDefault();
                var  contactTxt = $('.home-contact');
                if(contactTxt.is(':visible')){
                    contactTxt.slideUp(100);
                }else{
                    contactTxt.slideDown(100);
                }
            });
        })
    </script>
</body>
</html>
